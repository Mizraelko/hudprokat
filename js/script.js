"use strict"; function findDirection(n, t, i) { let u = n.getBoundingClientRect(), f = Math.abs(u.left - t.clientX), e = Math.abs(u.right - t.clientX), o = Math.abs(u.top - t.clientY), s = Math.abs(u.bottom - t.clientY), r = null; switch (Math.min(f, e, o, s)) { case f: r = i + "Left"; break; case e: r = i + "Right"; break; case o: r = i + "Top"; break; case s: r = i + "Bottom" }n.querySelector(`.${elementHover}`).classList = `${elementHover} ${r}` } function visibleButton() { arrowTop.style.visibility = window.pageYOffset > 600 ? "visible" : "hidden"; callMe.style.visibility = window.pageYOffset > 600 ? "visible" : "hidden"; arrowTop.addEventListener("click", n => { window.scrollTo({ top: 0, behavior: "smooth" }), n.preventDefault() }) } document.addEventListener("DOMContentLoaded", () => { function g(n) { if (n && y) { const t = document.querySelector(".popup.open"); t && u(t); n.classList.add("open"); n.addEventListener("click", n => { n.target.closest(".popup__body") || u(n.target.closest(".popup")) }) } } function u(n) { y && n.classList.remove("open") } function e(n) { n.keyCode && (v = n.keyCode); this.selectionStart < 3 && n.preventDefault(); let r = "+7 (___) ___-__-__", t = 0, e = r.replace(/\D/g, ""), u = this.value.replace(/\D/g, ""), i = r.replace(/[_\d]/g, function (n) { return t < u.length ? u.charAt(t++) || e.charAt(t) : n }); -1 != (t = i.indexOf("_")) && (t < 5 && (t = 3), i = i.slice(0, t)); let f = r.substr(0, this.value.length).replace(/_+/g, function (n) { return "\\d{1," + n.length + "}" }).replace(/[+()]/g, "\\$&"); (!(f = new RegExp("^" + f + "$")).test(this.value) || this.value.length < 5 || v > 47 && v < 58) && (this.value = i); "blur" == n.type && this.value.length < 5 && (this.value = "") } function l() { if (!d) { let n = document.getElementById("map_lazy"); d = !0; n.setAttribute("src", n.getAttribute("data-src")); n.removeAttribute("data-src") } } const n = document.querySelectorAll(".popup__link"); document.querySelector("body"); let y = !0; if (n.length > 0) for (let t = 0; t < n.length; t++) { const i = n[t]; i.addEventListener("click", n => { const t = i.getAttribute("href").replace("#", ""); g(document.getElementById(t)); n.preventDefault() }) } const a = document.querySelectorAll(".close__popup"); if (a.length > 0) for (let t = 0; t < n.length; t++) { const n = a[t] || a[0]; n.addEventListener("click", t => { u(n.closest(".popup")), t.preventDefault() }) } document.addEventListener("keydown", n => { 27 === n.keyCode && u(document.querySelector(".popup.open")) }); const f = document.getElementById("tel_modal"); let v; f.addEventListener("input", e, !1); f.addEventListener("focus", e, !1); f.addEventListener("blur", e, !1); f.addEventListener("keydown", e, !1); const t = document.getElementById("form"), p = document.getElementById("popup"); t.addEventListener("submit", async)(n); { n.preventDefault(); let r = "", u = function () { function i(n) { n.parentElement.classList.add("_error"); n.classList.add("_error") } function r(n) { n.parentElement.classList.remove("_error"); n.classList.remove("_error") } let n = 0, t = document.querySelectorAll(".__req"); for (let u = 0; u < t.length; u++) { const f = t[u]; return r(f), "checkbox" === f.getAttribute("type") && !1 === f.checked ? (i(f), n++) : "" === f.value && (i(f), n++), n } }(), i = new FormData(t); grecaptcha.ready(function () { grecaptcha.execute("6LeXL70aAAAAACiCuzocHUD192yTV6OFHHWUGVwS", { action: "homepage" }).then(function (n) { if (r = n, document.getElementById("token").value = n, i.append("image", o.files[0]), 0 === u) { i.append(n, r); t.classList.add("_sending"); let u = await; fetch("../contacts.php", { method: "POST", body: i }); u.ok ? (w.innerHTML = "", t.reset(), t.classList.remove("_sending"), setTimeout(() => { p.classList.remove("open"), alert("Спасибо.Ваше сообщение успешно отправленно.") }, 1e3)) : (t.classList.remove("_sending"), setTimeout(() => { p.classList.remove("open"), alert("Ooops,ошибочка вышла") }, 1e3)) } else alert("Заполните обязательные поля") }) }) } const o = document.getElementById("file"), w = document.getElementById("formPreview"); window.location.href.includes("contact") || o.addEventListener("change", () => { !function (n) { if (!["image/jpeg", "image/png", "image/gif"].includes(n.type)) return alert("Разрешены только изображения."), void (o.value = ""); if (n.size > 2097152) return void alert("Файл должен быть не более 2 МБ."); let t = new FileReader; t.onload = function (n) { w.innerHTML = `<img src="${n.target.result}" alt="фото">` }; t.onerror = function () { alert("Ошибка") }; t.readAsDataURL(n) }(o.files[0]) }); const b = document.querySelector(".tabs"), nt = document.querySelectorAll(".links__item"), tt = document.querySelectorAll(".tab-content"); b && b.addEventListener("click", n => { if (n.target.classList.contains("links__item")) { const t = n.target.dataset.tabsPath; nt.forEach(n => { n.classList.remove("links__item_active") }); document.querySelector(`[data-tabs-path="${t}"]`).classList.add("links__item_active"); it(t) } }); const it = n => { tt.forEach(n => { n.classList.remove("tab__content_active") }), document.querySelector(`[data-tabs-target="${n}"]`).classList.add("tab__content_active") }, i = { Android: function () { return navigator.userAgent.match(/Android/i) }, BlackBerry: function () { return navigator.userAgent.match(/BlackBerry/i) }, IOS: function () { return navigator.userAgent.match(/iPhone|iPad|iPod/i) }, Opera: function () { return navigator.userAgent.match(/Opera Mini/i) }, Windows: function () { return navigator.userAgent.match(/IEMobile/i) }, any: function () { return i.Android() || i.BlackBerry() || i.IOS() || i.Opera() || i.Windows() } }; i.any() ? (document.body.classList.add("_touch"), [...document.querySelectorAll(".menu__arrow-container")].map(n => { n.addEventListener("click", n => { let t = n.target.closest(".menu__arrow-container"); t.parentElement.classList.toggle("_active"); const i = [...document.querySelectorAll(".menu__list > li._active")]; i.length > 0 ? i.map(n => { n.classList.remove("_active"), t.parentElement.classList.add("_active") }) : t.parentElement.classList.add("_active"); 0 == i.length && t.parentElement.classList.toggle("_active") }) })) : document.body.classList.add("_pc"); const rt = document.querySelector(".menu__icon-container"), k = document.querySelector(".menu__body"), s = document.querySelector(".menu__icon"); s && rt.addEventListener("click", () => { document.body.classList.toggle("_lock"), s.classList.toggle("_active"), k.classList.toggle("_active") }); const r = document.querySelector(".menu__link[data-goto]"); r && r.addEventListener("click", n => { if (r.dataset.goto && document.querySelector(r.dataset.goto)) { const t = document.querySelector(r.dataset.goto).getBoundingClientRect().top + pageYOffset; s.classList.contains("_active") && (document.body.classList.remove("_lock"), s.classList.remove("_active"), k.classList.remove("_active")); window.scrollTo({ top: t, behavior: "smooth" }); n.preventDefault() } }); let h = document.querySelector(".map"), c = { once: !0, passive: !0, capture: !0 }; h.addEventListener("click", l, c); h.addEventListener("mouseover", l, c); h.addEventListener("touchstart", l, c); h.addEventListener("touchmove", l, c); let d = !1 }); const container = [...document.querySelectorAll(".grid__list")], element = "grid__item", elementHover = "grid__description", animationDuration = 300; let currentElement = null; container.map(n => { n.addEventListener("mouseover", function (t) { if (!currentElement) { let i = t.target.closest(".grid__item"); i && n.contains(i) && findDirection(currentElement = i, t, "from") } }), n.addEventListener("mouseout", function (n) { if (currentElement) { let t = n.relatedTarget; for (; t;) { if (t == currentElement) return; t = t.parentNode } findDirection(currentElement, n, "to"); currentElement = null } }) }); const arrowTop = document.querySelector(".arrow-top"), callMe = document.querySelector(".call-me"); window.addEventListener("scroll", visibleButton); const lazy = [...document.querySelectorAll("img")]; lazy.map(n => { n.setAttribute("loading", "lazy") })